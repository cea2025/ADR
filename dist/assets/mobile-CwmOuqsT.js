import{r as e}from"./vendor-Bz3rmKJE.js";const t={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},n={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},s="mousemove",i="mouseup";function c(e,t){if(0===t)return e;const n=Math.PI/180*t;return[e[0]*Math.cos(n)+e[1]*Math.sin(n),e[1]*Math.cos(n)-e[0]*Math.sin(n)]}function o(e,o){const r=t=>{const o="touches"in t;o&&t.touches.length>1||e((e,r)=>{r.trackMouse&&!o&&(document.addEventListener(s,a),document.addEventListener(i,p));const{clientX:u,clientY:l}=o?t.touches[0]:t,O=c([u,l],r.rotationAngle);return r.onTouchStartOrOnMouseDown&&r.onTouchStartOrOnMouseDown({event:t}),Object.assign(Object.assign(Object.assign({},e),n),{initial:O.slice(),xy:O,start:t.timeStamp||0})})},a=n=>{e((e,s)=>{const i="touches"in n;if(i&&n.touches.length>1)return e;if(n.timeStamp-e.start>s.swipeDuration)return e.swiping?Object.assign(Object.assign({},e),{swiping:!1}):e;const{clientX:o,clientY:r}=i?n.touches[0]:n,[a,u]=c([o,r],s.rotationAngle),p=a-e.xy[0],l=u-e.xy[1],O=Math.abs(p),g=Math.abs(l),h=(n.timeStamp||0)-e.start,v=Math.sqrt(O*O+g*g)/(h||1),b=[p/(h||1),l/(h||1)],d=function(e,t,n,s){return e>t?n>0?"Right":"Left":s>0?"Down":"Up"}(O,g,p,l),j="number"==typeof s.delta?s.delta:s.delta[d.toLowerCase()]||t.delta;if(O<j&&g<j&&!e.swiping)return e;const f={absX:O,absY:g,deltaX:p,deltaY:l,dir:d,event:n,first:e.first,initial:e.initial,velocity:v,vxvy:b};f.first&&s.onSwipeStart&&s.onSwipeStart(f),s.onSwiping&&s.onSwiping(f);let w=!1;return(s.onSwiping||s.onSwiped||s[`onSwiped${d}`])&&(w=!0),w&&s.preventScrollOnSwipe&&s.trackTouch&&n.cancelable&&n.preventDefault(),Object.assign(Object.assign({},e),{first:!1,eventData:f,swiping:!0})})},u=t=>{e((e,s)=>{let i;if(e.swiping&&e.eventData){if(t.timeStamp-e.start<s.swipeDuration){i=Object.assign(Object.assign({},e.eventData),{event:t}),s.onSwiped&&s.onSwiped(i);const n=s[`onSwiped${i.dir}`];n&&n(i)}}else s.onTap&&s.onTap({event:t});return s.onTouchEndOrOnMouseUp&&s.onTouchEndOrOnMouseUp({event:t}),Object.assign(Object.assign(Object.assign({},e),n),{eventData:i})})},p=e=>{document.removeEventListener(s,a),document.removeEventListener(i,p),u(e)},l=(e,n)=>{let s=()=>{};if(e&&e.addEventListener){const i=Object.assign(Object.assign({},t.touchEventOptions),n.touchEventOptions),c=[["touchstart",r,i],["touchmove",a,Object.assign(Object.assign({},i),n.preventScrollOnSwipe?{passive:!1}:{})],["touchend",u,i]];c.forEach(([t,n,s])=>e.addEventListener(t,n,s)),s=()=>c.forEach(([t,n])=>e.removeEventListener(t,n))}return s},O={ref:t=>{null!==t&&e((e,n)=>{if(e.el===t)return e;const s={};return e.el&&e.el!==t&&e.cleanUpTouch&&(e.cleanUpTouch(),s.cleanUpTouch=void 0),n.trackTouch&&t&&(s.cleanUpTouch=l(t,n)),Object.assign(Object.assign(Object.assign({},e),{el:t}),s)})}};return o.trackMouse&&(O.onMouseDown=r),[O,l]}function r(s){const{trackMouse:i}=s,c=e.useRef(Object.assign({},n)),r=e.useRef(Object.assign({},t)),a=e.useRef(Object.assign({},r.current));let u;for(u in a.current=Object.assign({},r.current),r.current=Object.assign(Object.assign({},t),s),t)void 0===r.current[u]&&(r.current[u]=t[u]);const[p,l]=e.useMemo(()=>o(e=>c.current=e(c.current,r.current),{trackMouse:i}),[i]);return c.current=function(e,t,n,s){return t.trackTouch&&e.el?e.cleanUpTouch?t.preventScrollOnSwipe!==n.preventScrollOnSwipe||t.touchEventOptions.passive!==n.touchEventOptions.passive?(e.cleanUpTouch(),Object.assign(Object.assign({},e),{cleanUpTouch:s(e.el,t)})):e:Object.assign(Object.assign({},e),{cleanUpTouch:s(e.el,t)}):(e.cleanUpTouch&&e.cleanUpTouch(),Object.assign(Object.assign({},e),{cleanUpTouch:void 0}))}(c.current,r.current,a.current,l),p}export{r as u};
