var e=Object.defineProperty,t=Object.defineProperties,s=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,l=(t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a,c=(e,t)=>{for(var s in t||(t={}))n.call(t,s)&&l(e,s,t[s]);if(a)for(var s of a(t))r.call(t,s)&&l(e,s,t[s]);return e},d=(e,a)=>t(e,s(a)),i=(e,t,s)=>l(e,"symbol"!=typeof t?t+"":t,s),x=(e,t,s)=>new Promise((a,n)=>{var r=e=>{try{c(s.next(e))}catch(t){n(t)}},l=e=>{try{c(s.throw(e))}catch(t){n(t)}},c=e=>e.done?a(e.value):Promise.resolve(e.value).then(r,l);c((s=s.apply(e,t)).next())});import{c as m,u as o,a as h,j as u,W as p,R as b,X as j,h as g,C as f,S as N,T as w}from"./index-Cglewwdb.js";import{r as y}from"./vendor-Bz3rmKJE.js";import{u as v}from"./mobile-CwmOuqsT.js";import{D as R,C,B as S,a as I}from"./download-T__RK9k1.js";import"./pdf-CFP917pd.js";
/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=m("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),P=m("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),M=m("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),A=m("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),L=m("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),E=m("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]),$=()=>{const{selectedPolicies:e,addPolicy:t,removePolicy:s,updatePolicyUnits:a}=o(),{policies:n}=h(),[r,l]=y.useState(0),i=v({onSwipedLeft:()=>{l(e=>Math.min(e+1,n.length-1))},onSwipedRight:()=>{l(e=>Math.max(e-1,0))},trackMouse:!0}),x=(a,n=1)=>{e.find(e=>e.policyId===a)?s(a):t({policyId:a,units:n})},m=(e,t)=>{t>0&&t<=10&&a(e,t)},p=t=>e.find(e=>e.policyId===t),b=e=>"number"==typeof e?`${e} ×©× ×™×`:`${e.male}/${e.female} ×©× ×™×`,j=e=>{switch(e){case"AAA":return"text-green-400";case"AA+":return"text-blue-400";case"AA":return"text-blue-500";case"A+":return"text-yellow-400";case"A":return"text-yellow-500";default:return"text-gray-400"}};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("h3",{className:"text-2xl font-bold text-adr-brown mb-2",children:"×‘×—×¨ ×¤×•×œ×™×¡×•×ª ×œ×”×©×§×¢×”"}),u.jsx("p",{className:"text-adr-light-brown",children:"×‘×—×¨ ×¢×“ 10 ×¤×•×œ×™×¡×•×ª ×©×•× ×•×ª, ×¢×“ 10 ×™×—×™×“×•×ª ×œ×›×œ ×¤×•×œ×™×¡×”"})]}),u.jsx("div",{className:"hidden sm:grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-6",children:n.filter(e=>!1!==e.isActive).map(e=>{const t=p(e.id),s=(null==t?void 0:t.units)||0;return u.jsxs("div",{className:"card-policy transition-all duration-300 cursor-pointer hover:scale-105 "+(t?"ring-4 ring-adr-gold":""),onClick:()=>x(e.id),children:[u.jsxs("div",{className:"flex items-center justify-between mb-2 md:mb-4",children:[u.jsxs("div",{className:"flex items-center space-x-2 md:space-x-3 space-x-reverse",children:[u.jsxs("div",{className:"relative",children:[u.jsx(P,{className:"w-6 h-6 md:w-8 md:h-8 text-adr-gold"}),u.jsx(R,{className:"w-3 h-3 md:w-4 md:h-4 text-adr-brown absolute -top-1 -right-1"})]}),u.jsx("h4",{className:"text-base md:text-lg font-bold truncate",children:e.name})]}),u.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[u.jsx(L,{className:`w-4 h-4 md:w-5 md:h-5 ${j(e.companyRating)}`}),u.jsx("span",{className:"text-xs md:text-sm font-medium",children:e.companyRating})]})]}),u.jsxs("div",{className:"space-y-2 md:space-y-3 text-adr-gold text-sm md:text-base",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("span",{className:"flex items-center space-x-1 md:space-x-2 space-x-reverse",children:[u.jsx(R,{className:"w-3 h-3 md:w-4 md:h-4"}),u.jsx("span",{className:"hidden sm:inline",children:"×¤×“×™×•×Ÿ:"}),u.jsx("span",{className:"sm:hidden",children:"×¤×“×™×•×Ÿ"})]}),u.jsxs("span",{className:"text-white font-semibold text-xs md:text-sm",children:["$",e.faceValue.toLocaleString()]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("span",{className:"flex items-center space-x-1 md:space-x-2 space-x-reverse",children:[u.jsx(C,{className:"w-3 h-3 md:w-4 md:h-4"}),u.jsx("span",{children:"×’×™×œ:"})]}),u.jsx("span",{className:"text-white font-semibold text-xs md:text-sm",children:b(e.age)})]}),u.jsxs("div",{className:"hidden sm:flex items-center justify-between",children:[u.jsxs("span",{className:"flex items-center space-x-2 space-x-reverse",children:[u.jsx(S,{className:"w-4 h-4"}),u.jsx("span",{children:"×—×‘×¨×”:"})]}),u.jsx("span",{className:"text-white font-semibold text-sm",children:e.insuranceCompany})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:"×¡×•×’:"}),u.jsx("span",{className:"text-white font-semibold text-xs md:text-sm",children:e.policyType})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:"LE:"}),u.jsxs("span",{className:"text-white font-semibold text-xs md:text-sm",children:[e.lifeExpectancy," ×©× ×™×"]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"hidden sm:inline",children:"×¢×œ×•×ª ×¨×›×™×©×”:"}),u.jsx("span",{className:"sm:hidden",children:"×¢×œ×•×ª:"}),u.jsxs("span",{className:"text-white font-semibold text-xs md:text-sm",children:["$",e.purchaseCost.toLocaleString()]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"hidden sm:inline",children:"×¤×ª×™×—×ª ×ª×™×§:"}),u.jsx("span",{className:"sm:hidden",children:"×¤×ª×™×—×”:"}),u.jsxs("span",{className:"text-white font-semibold text-xs md:text-sm",children:["â‚ª",e.openingCost.toLocaleString()]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"hidden sm:inline",children:"×“××™ × ×™×”×•×œ:"}),u.jsx("span",{className:"sm:hidden",children:"× ×™×”×•×œ:"}),u.jsxs("span",{className:"text-white font-semibold text-xs md:text-sm",children:["$",e.monthlyManagementFee,"/×—×•×“×©"]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"hidden sm:inline",children:"×¤×¨××™×”:"}),u.jsx("span",{className:"sm:hidden",children:"×¤×¨××™×”:"}),u.jsxs("span",{className:"text-white font-semibold text-xs md:text-sm",children:["$",e.monthlyPremium,"/×—×•×“×©"]})]})]}),t&&u.jsxs("div",{className:"mt-4 pt-4 border-t border-adr-gold",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("label",{className:"text-adr-gold text-sm font-medium",children:"×™×—×™×“×•×ª:"}),u.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[u.jsx("button",{onClick:t=>{t.stopPropagation(),m(e.id,Math.max(1,s-1))},className:"w-10 h-10 md:w-8 md:h-8 bg-adr-light-brown rounded-full flex items-center justify-center text-white hover:bg-adr-bronze transition-colors active:scale-95",children:u.jsx("span",{className:"text-lg md:text-base font-bold",children:"-"})}),u.jsx("span",{className:"text-white font-bold min-w-[2.5rem] md:min-w-[2rem] text-center text-lg md:text-base",children:s}),u.jsx("button",{onClick:t=>{t.stopPropagation(),m(e.id,Math.min(10,s+1))},className:"w-10 h-10 md:w-8 md:h-8 bg-adr-light-brown rounded-full flex items-center justify-center text-white hover:bg-adr-bronze transition-colors active:scale-95",children:u.jsx("span",{className:"text-lg md:text-base font-bold",children:"+"})})]})]}),u.jsxs("p",{className:"text-xs text-adr-gold mt-2 text-center",children:['×¡×”"×›: $',(e.purchaseCost*s).toLocaleString()]})]}),t&&u.jsx("div",{className:"absolute top-4 right-4",children:u.jsx("div",{className:"w-6 h-6 bg-adr-gold rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-adr-brown text-sm font-bold",children:"âœ“"})})})]},e.id)})}),u.jsx("div",d(c({className:"sm:hidden"},i),{children:u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"text-center mb-4",children:u.jsxs("span",{className:"text-sm text-adr-light-brown",children:[r+1," ××ª×•×š ",n.filter(e=>!1!==e.isActive).length]})}),u.jsx("div",{className:"relative",children:n.filter(e=>!1!==e.isActive).map((e,t)=>{const s=p(e.id),a=(null==s?void 0:s.units)||0,n=t===r;return u.jsxs("div",{className:`card-policy transition-all duration-300 cursor-pointer ${n?"block":"hidden"} ${s?"ring-4 ring-adr-gold":""}`,onClick:()=>x(e.id),children:[u.jsxs("div",{className:"flex items-center justify-between mb-2 md:mb-4",children:[u.jsxs("div",{className:"flex items-center space-x-2 md:space-x-3 space-x-reverse",children:[u.jsxs("div",{className:"relative",children:[u.jsx(P,{className:"w-6 h-6 md:w-8 md:h-8 text-adr-gold"}),u.jsx(R,{className:"w-3 h-3 md:w-4 md:h-4 text-adr-brown absolute -top-1 -right-1"})]}),u.jsx("h4",{className:"text-base md:text-lg font-bold truncate",children:e.name})]}),u.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[u.jsx(L,{className:`w-4 h-4 md:w-5 md:h-5 ${j(e.companyRating)}`}),u.jsx("span",{className:"text-xs md:text-sm font-medium",children:e.companyRating})]})]}),u.jsxs("div",{className:"space-y-2 md:space-y-3 text-adr-gold text-sm md:text-base",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("span",{className:"flex items-center space-x-1 md:space-x-2 space-x-reverse",children:[u.jsx(R,{className:"w-3 h-3 md:w-4 md:h-4"}),u.jsx("span",{children:"×¤×“×™×•×Ÿ:"})]}),u.jsxs("span",{className:"text-white font-semibold text-xs md:text-sm",children:["$",e.faceValue.toLocaleString()]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("span",{className:"flex items-center space-x-1 md:space-x-2 space-x-reverse",children:[u.jsx(C,{className:"w-3 h-3 md:w-4 md:h-4"}),u.jsx("span",{children:"×’×™×œ:"})]}),u.jsx("span",{className:"text-white font-semibold text-xs md:text-sm",children:b(e.age)})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:"×¡×•×’:"}),u.jsx("span",{className:"text-white font-semibold text-xs md:text-sm",children:e.policyType})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:"LE:"}),u.jsxs("span",{className:"text-white font-semibold text-xs md:text-sm",children:[e.lifeExpectancy," ×©× ×™×"]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:"×¢×œ×•×ª:"}),u.jsxs("span",{className:"text-white font-semibold text-xs md:text-sm",children:["$",e.purchaseCost.toLocaleString()]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:"×¤×ª×™×—×”:"}),u.jsxs("span",{className:"text-white font-semibold text-xs md:text-sm",children:["â‚ª",e.openingCost.toLocaleString()]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:"× ×™×”×•×œ:"}),u.jsxs("span",{className:"text-white font-semibold text-xs md:text-sm",children:["$",e.monthlyManagementFee,"/×—×•×“×©"]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:"×¤×¨××™×”:"}),u.jsxs("span",{className:"text-white font-semibold text-xs md:text-sm",children:["$",e.monthlyPremium,"/×—×•×“×©"]})]})]}),s&&u.jsxs("div",{className:"mt-4 pt-4 border-t border-adr-gold",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("label",{className:"text-adr-gold text-sm font-medium",children:"×™×—×™×“×•×ª:"}),u.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[u.jsx("button",{onClick:t=>{t.stopPropagation(),m(e.id,Math.max(1,a-1))},className:"w-10 h-10 md:w-8 md:h-8 bg-adr-light-brown rounded-full flex items-center justify-center text-white hover:bg-adr-bronze transition-colors active:scale-95",children:u.jsx("span",{className:"text-lg md:text-base font-bold",children:"-"})}),u.jsx("span",{className:"text-white font-bold min-w-[2.5rem] md:min-w-[2rem] text-center text-lg md:text-base",children:a}),u.jsx("button",{onClick:t=>{t.stopPropagation(),m(e.id,Math.min(10,a+1))},className:"w-10 h-10 md:w-8 md:h-8 bg-adr-light-brown rounded-full flex items-center justify-center text-white hover:bg-adr-bronze transition-colors active:scale-95",children:u.jsx("span",{className:"text-lg md:text-base font-bold",children:"+"})})]})]}),u.jsxs("p",{className:"text-xs text-adr-gold mt-2 text-center",children:['×¡×”"×›: $',(e.purchaseCost*a).toLocaleString()]})]}),s&&u.jsx("div",{className:"absolute top-4 right-4",children:u.jsx("div",{className:"w-6 h-6 bg-adr-gold rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-adr-brown text-sm font-bold",children:"âœ“"})})})]},e.id)})}),u.jsx("div",{className:"text-center mt-4",children:u.jsx("p",{className:"text-xs text-adr-light-brown",children:"×”×—×œ×§ ×™××™× ×”/×©×××œ×” ×œ×¢×‘×•×¨ ×‘×™×Ÿ ×¤×•×œ×™×¡×•×ª"})})]})})),e.length>0&&u.jsxs("div",{className:"bg-adr-light-brown rounded-lg p-6 text-center",children:[u.jsx("h4",{className:"text-xl font-bold text-white mb-2",children:"×¡×™×›×•× ×‘×—×™×¨×”"}),u.jsxs("p",{className:"text-adr-brown",children:["× ×‘×—×¨×• ",e.length," ×¤×•×œ×™×¡×•×ª"]})]})]})};
/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=new class{constructor(){i(this,"API_URL","https://api.exchangerate-api.com/v4/latest/USD"),i(this,"FALLBACK_API","https://api.fxapi.com/fx/latest?api_key=fxapi-demo&currencies=ILS&base=USD"),i(this,"STORAGE_KEY","adr-exchange-rate"),i(this,"CACHE_DURATION",36e5),i(this,"defaultRate",3.7)}getCurrentRate(){return x(this,null,function*(){try{const e=this.getCachedRate();if(e&&this.isRateValid(e))return e;const t=yield this.fetchFromAPI();return t?(this.saveToStorage(t),t):e||this.getDefaultRate()}catch(e){return this.getCachedRate()||this.getDefaultRate()}})}fetchFromAPI(){return x(this,null,function*(){var e,t;try{const t=yield fetch(this.API_URL);if(t.ok){const s=yield t.json();if(null==(e=s.rates)?void 0:e.ILS)return{rate:s.rates.ILS,lastUpdated:(new Date).toISOString(),source:"api"}}}catch(s){}try{const e=yield fetch(this.FALLBACK_API);if(e.ok){const s=yield e.json();if(null==(t=s.rates)?void 0:t.ILS)return{rate:s.rates.ILS,lastUpdated:(new Date).toISOString(),source:"api"}}}catch(s){}return null})}getCachedRate(){try{const e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):null}catch(e){return null}}isRateValid(e){if(!e.lastUpdated)return!1;return Date.now()-new Date(e.lastUpdated).getTime()<this.CACHE_DURATION}saveToStorage(e){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}catch(t){}}getDefaultRate(){return{rate:this.defaultRate,lastUpdated:(new Date).toISOString(),source:"manual"}}setManualRate(e){const t={rate:e,lastUpdated:(new Date).toISOString(),source:"manual"};return this.saveToStorage(t),t}refreshRate(){return x(this,null,function*(){return localStorage.removeItem(this.STORAGE_KEY),this.getCurrentRate()})}formatRate(e){return e.toFixed(4)}formatLastUpdated(e){const t=new Date(e),s=new Date,a=Math.floor((s.getTime()-t.getTime())/6e4);if(a<1)return"×¢×›×©×™×•";if(a<60)return`×œ×¤× ×™ ${a} ×“×§×•×ª`;if(a<1440){return`×œ×¤× ×™ ${Math.floor(a/60)} ×©×¢×•×ª`}return`×œ×¤× ×™ ${Math.floor(a/1440)} ×™××™×`}},T=({onRateChange:e,className:t=""})=>{const{exchangeRate:s,isLoading:a,isError:n,refreshRate:r,setManualRate:l,formatRate:c,formatLastUpdated:d}=(()=>{const[e,t]=y.useState(null),[s,a]=y.useState(!0),[n,r]=y.useState(!1),l=y.useCallback(()=>x(void 0,null,function*(){try{a(!0),r(!1);const e=yield D.getCurrentRate();t(e)}catch(e){r(!0),t({rate:3.7,lastUpdated:(new Date).toISOString(),source:"manual"})}finally{a(!1)}}),[]),c=y.useCallback(()=>x(void 0,null,function*(){try{a(!0),r(!1);const e=yield D.refreshRate();t(e)}catch(e){r(!0)}finally{a(!1)}}),[]),d=y.useCallback(e=>{try{const s=D.setManualRate(e);t(s),r(!1)}catch(s){r(!0)}},[]),i=y.useCallback(e=>D.formatRate(e),[]),m=y.useCallback(e=>D.formatLastUpdated(e),[]);return y.useEffect(()=>{l()},[l]),{exchangeRate:e,isLoading:s,isError:n,refreshRate:c,setManualRate:d,formatRate:i,formatLastUpdated:m}})(),[i,m]=y.useState(!1),[o,h]=y.useState(""),[g,f]=y.useState(!1);y.useEffect(()=>{(null==s?void 0:s.rate)&&e&&e(s.rate)},[null==s?void 0:s.rate,e]);const N=()=>{const e=parseFloat(o);!isNaN(e)&&e>0&&(l(e),m(!1))},w=()=>{m(!1),h("")};return s?u.jsxs("div",{className:`bg-white rounded-lg border border-gray-200 p-4 ${t}`,children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[u.jsx(R,{className:"w-5 h-5 text-adr-brown"}),u.jsx("span",{className:"font-medium text-adr-brown",children:"×©×¢×¨ ×“×•×œ×¨-×©×§×œ"})]}),u.jsxs("div",{className:"flex items-center space-x-1 space-x-reverse",children:[u.jsx("div",{className:"flex items-center space-x-1 space-x-reverse text-xs",children:"api"===s.source?u.jsxs(u.Fragment,{children:[u.jsx(E,{className:"w-3 h-3 text-green-500"}),u.jsx("span",{className:"text-green-600",children:"××•×˜×•××˜×™"})]}):u.jsxs(u.Fragment,{children:[u.jsx(p,{className:"w-3 h-3 text-blue-500"}),u.jsx("span",{className:"text-blue-600",children:"×™×“× ×™"})]})}),n&&u.jsx("div",{title:"×©×’×™××” ×‘×¢×“×›×•×Ÿ ×©×¢×¨",children:u.jsx(k,{className:"w-4 h-4 text-yellow-500"})}),u.jsx("button",{onClick:()=>x(void 0,null,function*(){f(!0);try{yield r()}finally{f(!1)}}),disabled:g||a,className:"p-1 text-gray-400 hover:text-adr-brown transition-colors disabled:opacity-50",title:"×¨×¢× ×Ÿ ×©×¢×¨",children:u.jsx(b,{className:"w-4 h-4 "+(g?"animate-spin":"")})}),!i&&u.jsx("button",{onClick:()=>{s&&(h(c(s.rate)),m(!0))},className:"p-1 text-gray-400 hover:text-adr-brown transition-colors",title:"×¢×¨×™×›×” ×™×“× ×™×ª",children:u.jsx(A,{className:"w-4 h-4"})})]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"flex items-center space-x-4 space-x-reverse",children:i?u.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[u.jsx("input",{type:"number",value:o,onChange:e=>h(e.target.value),onKeyDown:e=>{"Enter"===e.key?N():"Escape"===e.key&&w()},className:"w-20 px-2 py-1 text-lg font-bold text-adr-brown border border-adr-brown rounded focus:ring-2 focus:ring-adr-brown focus:border-transparent",step:"0.0001",min:"0",autoFocus:!0}),u.jsx("button",{onClick:N,className:"p-1 text-green-600 hover:text-green-800 transition-colors",title:"×©××•×¨",children:u.jsx(M,{className:"w-4 h-4"})}),u.jsx("button",{onClick:w,className:"p-1 text-red-600 hover:text-red-800 transition-colors",title:"×‘×˜×œ",children:u.jsx(j,{className:"w-4 h-4"})})]}):u.jsxs("div",{className:"text-2xl font-bold text-adr-brown",children:["â‚ª",c(s.rate)]})}),u.jsxs("div",{className:"text-left",children:[u.jsxs("div",{className:"text-xs text-gray-500",children:["×¢×•×“×›×Ÿ: ",d(s.lastUpdated)]}),"api"===s.source&&u.jsx("div",{className:"text-xs text-green-600",children:"×©×¢×¨ ×¨×©××™ × ×•×›×—×™"}),"manual"===s.source&&u.jsx("div",{className:"text-xs text-blue-600",children:"×©×¢×¨ ×™×“× ×™"})]})]}),n&&"manual"===s.source&&u.jsx("div",{className:"mt-2 text-xs text-yellow-600 bg-yellow-50 p-2 rounded",children:"âš ï¸ ×œ× × ×™×ª×Ÿ ×œ×¢×“×›×Ÿ ×©×¢×¨ ××•×˜×•××˜×™, ××©×ª××© ×‘×©×¢×¨ ×™×“× ×™"})]}):u.jsxs("div",{className:`flex items-center space-x-2 space-x-reverse text-gray-500 ${t}`,children:[u.jsx(R,{className:"w-4 h-4"}),u.jsx("span",{className:"text-sm",children:"×˜×•×¢×Ÿ ×©×¢×¨ ×—×œ×™×¤×™×Ÿ..."})]})},F=({onCalculate:e,isCalculating:t})=>{const{selectedPolicies:s,userType:a,exchangeRate:n,setExchangeRate:r,getTotalInvestment:l}=o(),[i,x]=y.useState("highest"),[m,h]=y.useState({managementFees:!0,openingCosts:!0}),p=g(a,"actualLE"),b=l();return u.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-4 md:p-8 border border-adr-brown",children:[u.jsxs("div",{className:"text-center mb-6 md:mb-8",children:[u.jsx("h3",{className:"text-xl md:text-2xl font-bold text-adr-brown mb-2",children:"×”×’×“×¨×•×ª ×—×™×©×•×‘"}),u.jsx("p",{className:"text-base md:text-lg text-adr-light-brown",children:"×”×’×“×¨ ××ª ×”×¤×¨××˜×¨×™× ×œ×—×™×©×•×‘ ×”×ª×©×•××”"})]}),u.jsxs("form",{onSubmit:t=>{if(t.preventDefault(),0===s.length)return void alert("×× × ×‘×—×¨ ×œ×¤×—×•×ª ×¤×•×œ×™×¡×” ××—×ª");e({selectedPolicies:s,leCalculationMethod:i,includeCostsInReturn:m,exchangeRate:n})},className:"space-y-6",children:[u.jsxs("div",{className:"bg-adr-cream rounded-lg p-4 md:p-6",children:[u.jsxs("h4",{className:"text-base md:text-lg font-semibold text-adr-brown mb-3 md:mb-4 flex items-center",children:[u.jsx(R,{className:"w-4 h-4 md:w-5 md:h-5 mr-2"}),"×¡×™×›×•× ×”×©×§×¢×”"]}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 md:gap-4",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("p",{className:"text-adr-light-brown text-xs md:text-sm",children:"×¤×•×œ×™×¡×•×ª × ×‘×—×¨×•×ª"}),u.jsx("p",{className:"text-xl md:text-2xl font-bold text-adr-brown",children:s.length})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("p",{className:"text-adr-light-brown text-xs md:text-sm",children:'×¡×”"×› ×”×©×§×¢×”'}),u.jsxs("p",{className:"text-xl md:text-2xl font-bold text-adr-brown",children:["$",b.toLocaleString()]})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("p",{className:"text-adr-light-brown text-xs md:text-sm",children:"×‘×©×§×œ×™×"}),u.jsxs("p",{className:"text-xl md:text-2xl font-bold text-adr-brown",children:["â‚ª",(b*n).toLocaleString()]})]})]})]}),u.jsxs("div",{className:"space-y-3 md:space-y-4",children:[u.jsxs("h4",{className:"text-base md:text-lg font-semibold text-adr-brown flex items-center",children:[u.jsx(f,{className:"w-4 h-4 md:w-5 md:h-5 mr-2"}),"×©×™×˜×ª ×—×™×©×•×‘ Life Expectancy"]}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 md:gap-4",children:[u.jsxs("label",{className:"flex items-center space-x-3 space-x-reverse cursor-pointer",children:[u.jsx("input",{type:"radio",name:"leMethod",value:"highest",checked:"highest"===i,onChange:e=>x(e.target.value),className:"text-adr-brown focus:ring-adr-gold"}),u.jsx("span",{className:"text-adr-brown",children:"LE ×”×’×‘×•×”"})]}),u.jsxs("label",{className:"flex items-center space-x-3 space-x-reverse cursor-pointer",children:[u.jsx("input",{type:"radio",name:"leMethod",value:"average",checked:"average"===i,onChange:e=>x(e.target.value),className:"text-adr-brown focus:ring-adr-gold"}),u.jsx("span",{className:"text-adr-brown",children:"LE ×××•×¦×¢"})]}),u.jsxs("label",{className:"flex items-center space-x-3 space-x-reverse cursor-pointer",children:[u.jsx("input",{type:"radio",name:"leMethod",value:"actual",checked:"actual"===i,onChange:e=>x(e.target.value),disabled:!p,className:"text-adr-brown focus:ring-adr-gold "+(p?"":"opacity-50 cursor-not-allowed")}),u.jsxs("span",{className:""+(p?"text-adr-brown":"text-adr-light-brown"),children:["LE ×××™×ª×™ ",!p&&"(×× ×”×œ×™× ×‘×œ×‘×“)"]})]})]})]}),u.jsxs("div",{className:"space-y-3 md:space-y-4",children:[u.jsxs("h4",{className:"text-base md:text-lg font-semibold text-adr-brown flex items-center",children:[u.jsx(N,{className:"w-4 h-4 md:w-5 md:h-5 mr-2"}),"×›×œ×™×œ×ª ×¢×œ×•×™×•×ª ×‘×—×™×©×•×‘"]}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 md:gap-4",children:[u.jsxs("label",{className:"flex items-center space-x-3 space-x-reverse cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:m.managementFees,onChange:e=>h(t=>d(c({},t),{managementFees:e.target.checked})),className:"text-adr-brown focus:ring-adr-gold rounded"}),u.jsx("span",{className:"text-adr-brown",children:"×“××™ × ×™×”×•×œ ×—×•×“×©×™×™×"})]}),u.jsxs("label",{className:"flex items-center space-x-3 space-x-reverse cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:m.openingCosts,onChange:e=>h(t=>d(c({},t),{openingCosts:e.target.checked})),className:"text-adr-brown focus:ring-adr-gold rounded"}),u.jsx("span",{className:"text-adr-brown",children:"×¢×œ×•×™×•×ª ×¤×ª×™×—×ª ×ª×™×§"})]})]})]}),u.jsx(T,{onRateChange:r}),u.jsx("div",{className:"text-center pt-4 md:pt-6",children:u.jsx("button",{type:"submit",disabled:t||0===s.length,className:"btn-primary w-full sm:w-auto "+(t||0===s.length?"opacity-50 cursor-not-allowed":""),children:t?"××—×©×‘...":"×—×©×‘ ×ª×©×•××”"})})]})]})},O=({results:e})=>{const t=(e,t="USD")=>`${"USD"===t?"$":"â‚ª"}${e.toLocaleString()}`,s=e=>`${e.toFixed(1)}%`;return u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("h3",{className:"text-3xl font-bold text-adr-brown mb-2",children:"×ª×•×¦××•×ª ×”×—×™×©×•×‘"}),u.jsx("p",{className:"text-lg text-adr-light-brown",children:"×¡×™×›×•× ×”×ª×©×•××” ×”×¦×¤×•×™×” ××”×”×©×§×¢×”"})]}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 md:gap-6",children:[u.jsxs("div",{className:"metric-card",children:[u.jsx("div",{className:"flex items-center justify-center mb-2 md:mb-4",children:u.jsx(R,{className:"w-6 h-6 md:w-8 md:h-8 text-adr-gold"})}),u.jsx("h4",{className:"text-adr-gold text-xs md:text-sm font-medium mb-2",children:'×¡×”"×› ×”×©×§×¢×”'}),u.jsx("p",{className:"text-white text-2xl md:text-3xl font-bold",children:t(e.totalPurchaseCost)}),u.jsx("p",{className:"text-adr-gold text-xs md:text-sm mt-1",children:t(e.currencyConversion.totalInILS,"ILS")})]}),u.jsxs("div",{className:"metric-card",children:[u.jsx("div",{className:"flex items-center justify-center mb-2 md:mb-4",children:u.jsx(w,{className:"w-6 h-6 md:w-8 md:h-8 text-adr-gold"})}),u.jsx("h4",{className:"text-adr-gold text-xs md:text-sm font-medium mb-2",children:"×ª×©×•××” ×¦×¤×•×™×”"}),u.jsx("p",{className:"text-white text-2xl md:text-3xl font-bold",children:t(e.expectedReturns.average.totalReturn)}),u.jsx("p",{className:"text-adr-gold text-xs md:text-sm mt-1",children:s(e.expectedReturns.average.totalReturnPercentage)})]}),u.jsxs("div",{className:"metric-card",children:[u.jsx("div",{className:"flex items-center justify-center mb-2 md:mb-4",children:u.jsx(C,{className:"w-6 h-6 md:w-8 md:h-8 text-adr-gold"})}),u.jsx("h4",{className:"text-adr-gold text-xs md:text-sm font-medium mb-2",children:"×¨×•×•×— × ×˜×•"}),u.jsx("p",{className:"text-white text-2xl md:text-3xl font-bold",children:t(e.expectedReturns.average.netProfit)}),u.jsxs("p",{className:"text-adr-gold text-xs md:text-sm mt-1",children:[s(e.expectedReturns.average.annualizedReturn)," ×œ×©× ×”"]})]}),u.jsxs("div",{className:"metric-card",children:[u.jsx("div",{className:"flex items-center justify-center mb-2 md:mb-4",children:u.jsx(w,{className:"w-6 h-6 md:w-8 md:h-8 text-adr-gold"})}),u.jsx("h4",{className:"text-adr-gold text-xs md:text-sm font-medium mb-2",children:"×ª×§×•×¤×” ×¢×“ ×¤×§×™×¢×”"}),u.jsx("p",{className:"text-white text-2xl md:text-3xl font-bold",children:e.expectedReturns.average.timeToMaturity}),u.jsx("p",{className:"text-adr-gold text-xs md:text-sm mt-1",children:"×©× ×™×"})]})]}),u.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-600 rounded-lg p-4 md:p-6 text-white mb-6 md:mb-8",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"text-orange-100 text-sm md:text-base font-medium mb-2",children:"ğŸ’° ×¢×œ×•×ª ×—×•×“×©×™×ª"}),u.jsxs("p",{className:"text-white text-2xl md:text-4xl font-bold",children:[t(e.monthlyCost),"/×—×•×“×©"]}),u.jsxs("p",{className:"text-orange-100 text-xs md:text-sm mt-1",children:["â‚ª",(e.monthlyCost*e.currencyConversion.usdToIls).toLocaleString(),"/×—×•×“×©"]})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("p",{className:"text-orange-100 text-xs md:text-sm",children:"×›×•×œ×œ ×¤×¨××™×•×ª + ×“××™ × ×™×”×•×œ"}),u.jsxs("p",{className:"text-white text-lg md:text-xl font-semibold mt-1",children:["×¢×“ ×¤×§×™×¢×”: ",t(e.monthlyCost*e.expectedReturns.average.timeToMaturity*12)]})]})]})}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-8",children:[u.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-4 md:p-6 border border-adr-brown",children:[u.jsx("h4",{className:"text-lg md:text-xl font-bold text-adr-brown mb-3 md:mb-4",children:"×¤×™×¨×•×˜ ×”×©×§×¢×”"}),u.jsxs("div",{className:"space-y-3 md:space-y-4",children:[u.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-adr-cream",children:[u.jsx("span",{className:"text-adr-light-brown text-sm md:text-base",children:"×¢×œ×•×ª ×¨×›×™×©×”"}),u.jsx("span",{className:"font-semibold text-adr-brown text-sm md:text-base",children:t(e.totalPurchaseCost)})]}),u.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-adr-cream",children:[u.jsx("span",{className:"text-adr-light-brown text-sm md:text-base",children:"×¢×œ×•×™×•×ª ×¤×¨××™×•×ª"}),u.jsx("span",{className:"font-semibold text-adr-brown text-sm md:text-base",children:t(e.totalMonthlyPremiums)})]}),u.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-adr-cream",children:[u.jsx("span",{className:"text-adr-light-brown text-sm md:text-base",children:"×“××™ × ×™×”×•×œ"}),u.jsx("span",{className:"font-semibold text-adr-brown text-sm md:text-base",children:t(e.totalManagementFees)})]}),u.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-adr-cream",children:[u.jsx("span",{className:"text-adr-light-brown text-sm md:text-base",children:"×¢×œ×•×™×•×ª ×¤×ª×™×—×”"}),u.jsx("span",{className:"font-semibold text-adr-brown text-sm md:text-base",children:t(e.totalOpeningCosts)})]}),u.jsxs("div",{className:"flex justify-between items-center py-3 bg-adr-cream rounded-lg px-3 md:px-4",children:[u.jsx("span",{className:"font-bold text-adr-brown text-sm md:text-base",children:'×¡×”"×› ×¢×œ×•×™×•×ª'}),u.jsx("span",{className:"font-bold text-adr-brown text-sm md:text-base",children:t(e.totalInvestment)})]})]})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-4 md:p-6 border border-adr-brown",children:[u.jsx("h4",{className:"text-lg md:text-xl font-bold text-adr-brown mb-3 md:mb-4",children:"× ×™×ª×•×— ×ª×©×•××”"}),u.jsxs("div",{className:"space-y-3 md:space-y-4",children:[u.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-adr-cream",children:[u.jsx("span",{className:"text-adr-light-brown text-sm md:text-base",children:"×ª×©×•××” ×©× ×ª×™×ª"}),u.jsx("span",{className:"font-semibold text-adr-brown text-sm md:text-base",children:s(e.expectedReturns.average.annualizedReturn)})]}),u.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-adr-cream",children:[u.jsx("span",{className:"text-adr-light-brown text-sm md:text-base",children:"×¨×™×‘×™×ª ×“×¨×™×‘×™×ª"}),u.jsx("span",{className:"font-semibold text-adr-brown text-sm md:text-base",children:s(e.expectedReturns.average.compoundReturn)})]}),u.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-adr-cream",children:[u.jsx("span",{className:"text-adr-light-brown text-sm md:text-base",children:"×ª×©×•××” ×›×•×œ×œ×ª"}),u.jsx("span",{className:"font-semibold text-adr-brown text-sm md:text-base",children:s(e.expectedReturns.average.totalReturnPercentage)})]}),u.jsxs("div",{className:"flex justify-between items-center py-3 bg-adr-cream rounded-lg px-3 md:px-4",children:[u.jsx("span",{className:"font-bold text-adr-brown text-sm md:text-base",children:"×¨×•×•×— × ×˜×•"}),u.jsx("span",{className:"font-bold text-adr-brown text-sm md:text-base",children:t(e.expectedReturns.average.netProfit)})]})]})]})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-4 md:p-6 border border-adr-brown",children:[u.jsx("h4",{className:"text-lg md:text-xl font-bold text-adr-brown mb-3 md:mb-4",children:"×”××¨×ª ××˜×‘×¢"}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 md:gap-6 text-center",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-adr-light-brown text-xs md:text-sm mb-2",children:"×©×¢×¨ ×—×œ×™×¤×™×Ÿ"}),u.jsxs("p",{className:"text-xl md:text-2xl font-bold text-adr-brown",children:["1$ = â‚ª",e.currencyConversion.usdToIls]})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-adr-light-brown text-xs md:text-sm mb-2",children:"×”×©×§×¢×” ×‘×“×•×œ×¨×™×"}),u.jsx("p",{className:"text-xl md:text-2xl font-bold text-adr-brown",children:t(e.totalInvestment)})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-adr-light-brown text-xs md:text-sm mb-2",children:"×”×©×§×¢×” ×‘×©×§×œ×™×"}),u.jsx("p",{className:"text-xl md:text-2xl font-bold text-adr-brown",children:t(e.totalInvestment*e.currencyConversion.usdToIls,"ILS")})]})]})]}),u.jsx("div",{className:"text-center",children:u.jsxs("button",{onClick:()=>{},className:"btn-primary flex items-center mx-auto space-x-2 space-x-reverse",children:[u.jsx(I,{className:"w-5 h-5"}),u.jsx("span",{children:"×™×™×¦× ×œ-PDF"})]})})]})};class U{static calculatePolicyReturn(e,t,s,a,n){const r=e.purchaseCost*t,l=e.faceValue*t;let c=e.lifeExpectancy;switch(s){case"highest":c=1.2*e.lifeExpectancy;break;case"average":c=e.lifeExpectancy;break;case"actual":c=.9*e.lifeExpectancy}const d=12*c,i=e.monthlyPremium*t*d;let x=0,m=0;a.managementFees&&(x=e.monthlyManagementFee*t*d,e.managementDiscount&&(x-=e.managementDiscount*t)),a.openingCosts&&(m=e.openingCost*t/n,e.openingDiscount&&(m-=e.openingDiscount*t/n));const o=r+i+x+m,h=l-o,u=100*(Math.pow(l/o,1/c)-1);return{totalReturn:l,netProfit:h,annualizedReturn:u,compoundReturn:100*(Math.pow(1+u/100,c)-1),totalReturnPercentage:(l-o)/o*100,timeToMaturity:c}}static calculatePortfolioReturns(e,t,s){const{leCalculationMethod:a,includeCostsInReturn:n,exchangeRate:r=3.7}=s,l=t.map(t=>{const s=e.find(e=>e.id===t.policyId);if(!s)throw new Error(`Policy not found: ${t.policyId}`);return this.calculatePolicyReturn(s,t.units,a,n,r)}),c=t.reduce((t,s)=>{const a=e.find(e=>e.id===s.policyId);return t+((null==a?void 0:a.purchaseCost)||0)*s.units},0),d=t.reduce((t,s)=>{const n=e.find(e=>e.id===s.policyId);if(!n)return t;const r=12*this.getAdjustedLE(n.lifeExpectancy,a);return t+n.monthlyPremium*s.units*r},0),i=n.managementFees?t.reduce((t,s)=>{const n=e.find(e=>e.id===s.policyId);if(!n)return t;const r=12*this.getAdjustedLE(n.lifeExpectancy,a);let l=n.monthlyManagementFee*s.units*r;return n.managementDiscount&&(l-=n.managementDiscount*s.units),t+l},0):0,x=n.openingCosts?t.reduce((t,s)=>{const a=e.find(e=>e.id===s.policyId);if(!a)return t;let n=a.openingCost*s.units/r;return a.openingDiscount&&(n-=a.openingDiscount*s.units/r),t+n},0):0,m=t.reduce((t,s)=>{const a=e.find(e=>e.id===s.policyId);if(!a)return t;return t+a.monthlyPremium*s.units+(n.managementFees?a.monthlyManagementFee*s.units:0)},0),o=c+d+i+x,h=l.reduce((e,t)=>e+t.totalReturn,0),u=l.reduce((e,t)=>e+t.netProfit,0),p=t.reduce((t,s)=>{const n=e.find(e=>e.id===s.policyId);if(!n)return t;const r=n.purchaseCost*s.units/c;return t+this.getAdjustedLE(n.lifeExpectancy,a)*r},0),b={totalReturn:h,netProfit:u,annualizedReturn:100*(Math.pow(h/o,1/p)-1),compoundReturn:100*(Math.pow(1+u/o/p,p)-1),totalReturnPercentage:u/o*100,timeToMaturity:p},j=[];for(let g=1;g<=Math.ceil(p);g++){const e=o*(b.annualizedReturn/100),t=e*g,s=o*Math.pow(1+b.annualizedReturn/100,g)-o;j.push({year:g,cumulativeReturn:t,annualReturn:e,withCompounding:s,withoutCompounding:e})}return{totalPurchaseCost:c,totalMonthlyPremiums:d,totalManagementFees:i,totalOpeningCosts:x,totalInvestment:o,monthlyCost:m,expectedReturns:{individual:l,average:b,actual:b},annualBreakdown:j,currencyConversion:{usdToIls:r,totalInILS:h*r}}}static getAdjustedLE(e,t){switch(t){case"highest":return 1.2*e;case"average":default:return e;case"actual":return.9*e}}static validateCalculationInput(e,t){const s=[];return 0===t.length&&s.push("×™×© ×œ×‘×—×•×¨ ×œ×¤×—×•×ª ×¤×•×œ×™×¡×” ××—×ª"),t.length>10&&s.push("× ×™×ª×Ÿ ×œ×‘×—×•×¨ ×¢×“ 10 ×¤×•×œ×™×¡×•×ª ×‘×œ×‘×“"),t.forEach(t=>{const a=e.find(e=>e.id===t.policyId);a?((t.units<=0||t.units>10)&&s.push(`×›××•×ª ×™×—×™×“×•×ª ×œ× ×ª×§×™× ×” ×¢×‘×•×¨ ${a.name}: ${t.units}`),a.purchaseCost<=0&&s.push(`×¢×œ×•×ª ×¨×›×™×©×” ×œ× ×ª×§×™× ×” ×¢×‘×•×¨ ${a.name}`),a.faceValue<=a.purchaseCost&&s.push(`×¢×¨×š × ×§×•×‘ ×§×˜×Ÿ ××¢×œ×•×ª ×”×¨×›×™×©×” ×¢×‘×•×¨ ${a.name}`),(a.lifeExpectancy<=0||a.lifeExpectancy>50)&&s.push(`×ª×•×—×œ×ª ×—×™×™× ×œ× ×ª×§×™× ×” ×¢×‘×•×¨ ${a.name}: ${a.lifeExpectancy}`)):s.push(`×¤×•×œ×™×¡×” ×œ× × ××¦××”: ${t.policyId}`)}),{isValid:0===s.length,errors:s}}static calculateRiskMetrics(e,t){const s=t.map(t=>{const s=e.find(e=>e.id===t.policyId);return s?"number"==typeof s.age?s.age:(s.age.male+s.age.female)/2:0}),a=s.reduce((e,t)=>e+t,0)/s.length,n=s.reduce((e,t)=>e+Math.pow(t-a,2),0)/s.length,r=Math.sqrt(n),l=t.map(t=>{const s=e.find(e=>e.id===t.policyId);return(null==s?void 0:s.insuranceCompany)||""}),c=new Set(l).size/t.length;let d=5;a>85?d-=2:a<70&&(d+=2),r>5&&(d+=1),c<.5&&(d+=1);const i=t.reduce((t,s)=>{const a=e.find(e=>e.id===s.policyId);if(!a)return t;return t+({A:1,"A+":2,AA:3,"AA+":4,AAA:5}[a.companyRating]||1)},0)/t.length;return i<2.5&&(d+=1),d=Math.max(1,Math.min(10,d)),{riskScore:d,averageAge:a,ageStandardDeviation:r,diversificationRatio:c,averageRating:i,recommendedAction:d<=4?"×”×©×§×¢×” ××•××œ×¦×ª":d<=7?"×”×©×§×¢×” ×–×”×™×¨×”":"×”×©×§×¢×” ××¡×•×›× ×ª"}}}const z=()=>{const[e,t]=y.useState(null),[s,a]=y.useState(!1),{policies:n}=h();return u.jsxs("div",{className:"max-w-7xl mx-auto space-y-6 md:space-y-8 px-4 md:px-0",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("h2",{className:"text-2xl md:text-4xl font-bold text-adr-brown mb-3 md:mb-4",children:"××—×©×‘×•×Ÿ Life Settlements"}),u.jsx("p",{className:"text-base md:text-lg text-adr-light-brown",children:"×—×©×‘ ××ª ×”×ª×©×•××” ×”×¦×¤×•×™×” ××”×©×§×¢×” ×‘×¤×•×œ×™×¡×•×ª ×‘×™×˜×•×— ×—×™×™×"})]}),u.jsx($,{}),u.jsx(F,{onCalculate:e=>x(void 0,null,function*(){a(!0);try{yield new Promise(e=>setTimeout(e,800));const s=((e,t)=>{const s=U.validateCalculationInput(e,t.selectedPolicies);if(!s.isValid)throw new Error(`×©×’×™××•×ª ×‘× ×ª×•× ×™×: ${s.errors.join(", ")}`);return U.calculatePortfolioReturns(e,t.selectedPolicies,t)})(n,e);t(s)}catch(s){alert(`×©×’×™××” ×‘×—×™×©×•×‘: ${s instanceof Error?s.message:"×©×’×™××” ×œ× ×™×“×•×¢×”"}`)}finally{a(!1)}}),isCalculating:s}),e&&u.jsx(O,{results:e}),s&&u.jsxs("div",{className:"text-center py-8 md:py-12",children:[u.jsx("div",{className:"inline-block animate-spin rounded-full h-10 w-10 md:h-12 md:w-12 border-b-2 border-adr-brown"}),u.jsx("p",{className:"mt-3 md:mt-4 text-adr-brown text-base md:text-lg",children:"××—×©×‘..."})]})]})};export{z as default};
